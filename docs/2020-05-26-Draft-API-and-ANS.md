# Draft API and ANS Fields

## Overview

The Draft API `Document` endpoints listed below contain some special handling for the ANS blob that is passed in or returned in the response. This document outlines the various ways that certain fields are handled and what users can expect when making requests.

`POST /draft/v1/story`: Create a Document

`GET /draft/v1/story/:id/revision`: List All Revisions

`GET /draft/v1/story/:id/revision/:revision_id`: Get Revision by ID

`PUT /draft/v1/story/:id/revision/draft`: Update Draft Revision

`POST /draft/v1/story/:id/revision/published`: Publish Document

`DELETE /draft/v1/story/:id/revision/published`: Unpublish Document

`PUT /draft/v1/story/:id/revision/revert`: Revert Document

## Dates

### System Generated Fields
- `ans.created_date`
- `ans.last_updated_date`
- `ans.first_publish_date`

These fields are generated by the system, and will be ignored if they are passed into write endpoints through the request body.

### Overrideable Fields
- `ans.publish_date`
- `ans.display_date`

These fields are generated by the system, but can be overriden by values in the request body when using the following two endpoints:
- `POST /draft/v1/story`: Create a Document
- `PUT /draft/v1/story/:id/revision/draft`: Update Draft Revision

### Revert Document Endpoint

The fields `ans.first_publish_date` and `ans.publish_date` are omitted from the response of this endpoint.

## IDs

The following fields are omitted from responses. They will be ignored if they are included in the request body.
- `ans._id`
    - promoted to top level `document_id` field
- `ans.revision.revision_id`
    - promoted to top level `_id` field
- `ans.revision.parent_id`

## Circulation/URL Information

The following fields are omitted from responses. Draft API endpoints will reject requests if any of these fields are present in the request body.
- `ans.websites`
- `ans.canonical_url`
- `ans.taxonomy.sections`
- `ans.taxonomy.sites`
- `ans.taxonomy.primary_section`
- `ans.taxonomy.primary_site`

## Revision Information

The following fields are omitted from responses. They will be ignored if they are included in the request body.
- `revision.index`
- `revision.branch`
- `revision.editions`

## List All Revisions Endpoint

The following fields are omimitted from the response from this endpoint.
- `ans.canonical_website`
- `ans.owner.id`
- `ans.version`
- `ans.slug`

In the Post-Migration version of Draft API, this endpoint will differ by sending these additional fields.
