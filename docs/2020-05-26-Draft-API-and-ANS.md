# Draft API and ANS Fields

## Overview

The Draft API `Document` endpoints listed below contain some special handling for the ANS blob that is passed in through the request body and/or returned in responses. This document outlines the various ways that ANS fields are handled and what users can expect when making requests.

`POST /draft/v1/story`: Create a Document

`GET /draft/v1/story/:id/revision`: List All Revisions

`GET /draft/v1/story/:id/revision/:revision_id`: Get Revision by ID

`PUT /draft/v1/story/:id/revision/draft`: Update Draft Revision

`POST /draft/v1/story/:id/revision/published`: Publish Document

`DELETE /draft/v1/story/:id/revision/published`: Unpublish Document

`PUT /draft/v1/story/:id/revision/revert`: Revert Document

Each of the fields discussed below are nested under the `ans` field, which is a property of a `Revision`.

## Dates

### System Generated Fields
- `created_date`
- `last_updated_date`
- `first_publish_date`

These fields are generated by the system, and will be ignored if they are passed into write endpoints through the request body.

### Overrideable Fields
- `publish_date`
- `display_date`

These fields are generated by the system, but can be overriden by values in the request body when using the following two endpoints:
- `POST /draft/v1/story`: Create a Document
- `PUT /draft/v1/story/:id/revision/draft`: Update Draft Revision

### Revert Document Endpoint

The fields `first_publish_date` and `publish_date` are omitted from the response of this endpoint.

## IDs

The following fields are omitted from responses. They will be ignored if they are included in the request body.
- `_id`
    - promoted to top level `document_id` field of a `Revision`, or the `id` field of a `Document`
- `revision.revision_id`
    - promoted to top level `id` field of a `Revision`
- `revision.parent_id`

## Circulation/URL Information

The following fields are omitted from responses. Draft API endpoints will reject requests if any of these fields are present in the request body.
- `websites`
- `canonical_url`
- `taxonomy.sections`
- `taxonomy.sites`
- `taxonomy.primary_section`
- `taxonomy.primary_site`

## Revision Information

The following fields are omitted from responses. They will be ignored if they are included in the request body.
- `revision.index`
- `revision.branch`
- `revision.editions`

## List All Revisions Endpoint

The following fields are omimitted from the response from this endpoint.
- `canonical_website`
- `owner.id`
- `version`
- `slug`

In the Post-Migration version of Draft API, this endpoint will differ by sending these additional fields.
