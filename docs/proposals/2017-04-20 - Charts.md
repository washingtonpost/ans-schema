# Problem

Talking to publishing support, it seems as though the most often use case for tables was when doing a "basic data chart."  Estimated usage is 1-2 times a week throughout the entire newsroom. The following are some recent examples:

https://www.washingtonpost.com/lifestyle/kidspost/who-deserves-a-shot-at-the-nba-all-star-game/2017/01/25/c9995306-de5e-11e6-918c-99ede3c8cafa_story.html

https://www.washingtonpost.com/news/capital-weather-gang/wp/2017/03/02/does-a-record-warm-winter-mean-a-super-hot-summer-in-d-c/

Ellipsis needs to create data charts like these within an article. They need to add borders on rows or columns, a citation, and align data in cells.  Rows and columns may or may not be titled.

The newsroom also uses Methode/HTML tables for other purposes via templates -- notably timelines and bar charts. These are used less often and are each tied to specific template. For Ellipsis and ANS purposes, they should be considered a separate use case. See [ANS Stat Series](2017-04-20 - Statistic Series.md).

The following proposal deals specifically with the use case of creating a basic data chart.

# Proposal

A new `chart` format that includes row/column settings and a citation, and models cells as text elements (rather than strings.)

## Title

An ANS `text` element.

## Citation

An ANS `text` element, identical to a `citation` on the new `quote` element.  Intended to indicate the source of the data.

## Credits

An ANS credits object, can denormalize authors from author service. Intended to indicate the person who created this specific chart.

## No width/height/sizing options

Explicit sizing options are deliberately not included.

## Explicitly Defined Columns - `columns`

Data columns should be explicitly defined in the `columns` attribute. The following attributes can be set:

* `_id` Automatically-generated.
* `text_alignment` can be optionally set and applies to the entire column.
* `title` text element can be optionally supplied here which can function as a header for a column.  **If at least one column has a title than a header row containing the title should be added to the chart. Otherwise it should be omitted.**
* `borders` an array of strings with the possible values `"left"` and `"right"`

## Explicitly Defined Rows - `rows`

* `_id` Automatically-generated.
* `title` text element can be optionally supplied here which can function as a header for a row.  **If at least one row has a title then a header column containing the title should be added to the chart. Otherwise it should be omitted.**
* `borders` an array of strings with the possible values `"top"` and `"bottom"`
* `cells` an array of cell objects.

## Cells

Currently these objects have just two properties:

* `_id` - Automatically-generated
* `cell_content` - currently this object can only be an ANS `text` element.

# Example

```
{
  "type": "story",
  "version": "0.5.9",
  "content_elements": [
    {
      "type": "chart",

      "title": {
        "type": "text",
        "content": "My Awesome Chart"
      },

      "citation": {
        "type": "text",
        "content": "Source: The Washington Post"
      },

      "credits": {
        "by": [{
          "type": "author",
          "name": "Angela Wong"
        }]
      },

      "columns": [
        {
          "_id": "AAAAAAAAAAAAAAAAAAAAAA",
          "text_alignment": "left",
          "borders": [ "right" ],

          "title": {
            "type": "text",
            "content": "Men"
          }
        },
        {
          "_id": "AAAAAAAAAAAAAAAAAAAAAB",
          "text_alignment": "right",

          "title": {
            "type": "text",
            "content": "Women"
          }

        }
      ],


      "rows": [
        {
          "_id": "AAAAAAAAAAAAAAAAC",
          "title": {
            "type": "text",
            "content": "2000"
          },

          "borders": [ "bottom" ],

          "cells": [
            {
              "_id": "AAAAAAAAAAAAAAAACA",
              "cell_content": {
                "type": "text",
                "content": "$19.44"
              }
            },
            {
              "_id": "AAAAAAAAAAAAAAAACB",
              "cell_content": {
                "type": "text",
                "content": "$15.22"
              }
            }
          ]
        },

        {

          "_id": "AAAAAAAAAAAAAAAAD",

          "title": {
            "type": "text",
            "content": "2007"
          },

          "cells": [
            {
              "_id": "AAAAAAAAAAAAAAAADA",

              "cell_content": {
                "type": "text",
                "content": "$19.45"
              }
            },
            {
              "_id": "AAAAAAAAAAAAAAAADB",

              "cell_content": {
                "type": "text",
                "content": "$15.90"
              }
            }
          ]
        }
      ]
    }
  ]
}
```

# Concerns

### I have a bunch of legacy data with HTML tables. What should I do?

You have a couple of options.

* Map the data into a `chart` or other existing ANS element as best as possible. If the table you're looking at follows the same usage pattern as the `chart` element described above, this is the best choice.  If it follows mostly the same usage pattern, but requires a few new features, we can consider adding those features.

* Use another ANS element for special cases, or create a new one.  For WaPo timeline/rail templates, there is the statistic series proposal.  If you have other use cases that don't map closely to any existing covered cases, we can create new element types.

* Render as an image. You could take your previous table data, render it at high resolution, and save it as an image.  The preserves the presentation but loses the ability for editors to change it or renderers to reason about it.

* Render as raw html.  As a second-to-last-case resort, you can simply copy the HTML into a `raw_html` element. This will work for the web but likely means the element will be omitted from apps.

* Drop the element.

### Why doesn't this have more formatting options?

ANS Elements should be as narrowly-defined and semantic as possible. The more formatting options that are presented to the user and saved in ANS, the more constrained renderers are in their ability to present the data in an optimal way for their end-users.

### Okay, but why can't I set a column width?

Fixed column widths of any substance make rendering on mobile devices very difficult.  What if a mobile renderer wants to break a table up into multiple parts, or doesn't have as many pixels as the table asks for? Even percentage-based widths can result in columns that are too small to read or cause characters to bleed out. Writers and editors can't be expected to predict every possible format their content will appear in, so better to have them enter the data they want displayed with as much semantic information as possible and let designers  optimize the presentation.

### I have a table doesn't make sense without a fixed column width.

We can always add percentage-based widths in the future if users demand it.

### What about bar graphs?

We can add additional element types for graphs as demand grows.
